$(window).on("load",function(){$("#preloader").length&&$("#preloader").delay(100).fadeOut("slow",function(){$(this).remove()})}),$(document).ready(function(){const e=["#00cc00","#6600ff","#e600e6","#ff0000"];let t,a,l,o;$.ajax({type:"POST",url:"libs/php/getAll.php",dataType:"json",success:function(d){$("#directoryData").html(""),alphabetArray=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$.each(alphabetArray,function(i){t='<div class="row">'+`<div class="col-sm-6 alignmentRight" id="horizontal${i}">${alphabetArray[i]}</div>`+"</div>",$("#verticalAlphabet").append(`<a href="#horizontal${i}" class="vertical"><div class="col-sm-6">${alphabetArray[i]}</div></a>`),a=$("#directoryData").append(t),$.each(d.data,function(t){let c=d.data[t].lastName[0].toUpperCase();c===alphabetArray[i]&&(l='<div class="row"><div class="col-sm-6"></div><div class="col-sm-2">'+`<div id="square${t}" class="square"></div>`+'</div><div class="col-sm-4 namePosition">'+`<a id="nameLink${t}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${d.data[t].lastName}`+" "+`${d.data[t].firstName}</a>`,a.append(l),o=$(`#square${t}`),t%4==0?o.css("background-color",e[0]):t%4==1?o.css("background-color",e[1]):t%4==2?o.css("background-color",e[2]):t%4==3&&o.css("background-color",e[3]),$(`#nameLink${t}`).on("click",function(){$("#employeeHeading").empty(),$("#employeeHeading").append($(`#nameLink${t}`).text()),$("#txtFirstName").html(d.data[t].firstName),$("#txtLastName").html(d.data[t].lastName),$("#txtJobTitle").html(d.data[t].jobTitle),$("#txtEmail").html(d.data[t].email),$("#txtDept").html(d.data[t].department),$("#txtLocation").html(d.data[t].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(d.data[t].firstName),$("#txtEditLastName").html(d.data[t].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show"),$("#editCancel").on("click",function(){$("#editEmployeeModal").modal("hide")})}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show")}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")}),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}})}),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",data:{lastName:d.data[t].lastName},success:function(e){$("#deleteButtonMessage").html(""),$("#deleteButtonMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})}))})})}}),$("#plus").on("click",function(){$("#createHeading").empty(),$("#createHeading").append("Create employee"),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#createModal").modal("show")}),$("#createCancel").on("click",function(){$("#createModal").modal("hide")}),$("#createForm").submit(function(e){e.preventDefault(),$("#createModal").modal("hide"),$("#createConfirmModal").modal("show")}),$("#createConfirmForm").submit(function(e){e.preventDefault(),$("#createConfirmModal").modal("hide");let t=$("#createFirstName").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length));let a=$("#createLastName").val();""!==a&&(a=a[0].toUpperCase()+a.substring(1,a.length));let l=$("#createJobTitle").val();""!==l&&(l=l[0].toUpperCase()+l.substring(1,l.length)),$.ajax({url:"libs/php/createEmployee.php",method:"post",dataType:"text",data:{firstName:t,lastName:a,jobTitle:l,email:$("#createEmail").val(),dept:$("#createDept").val()},success:function(e){$("#createMessage").html(""),$("#createMessage").append(e)}}),$("#createSuccessModal").modal("show")}),$("#createCancel").on("click",function(){$("#createModal").modal("hide")}),$("#createConfirmCancel").on("click",function(){$("#createConfirmModal").modal("hide")}),$("#editButton").on("click",function(){const e=["#00cc00","#6600ff","#e600e6","#ff0000"];$.ajax({type:"POST",url:"libs/php/getAllPersonnel.php",dataType:"json",success:function(t){$("#deleteData").html(""),deleteAlphabetArray=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$.each(deleteAlphabetArray,function(a){let l='<div class="row">'+`<div class="col-sm-1 alignmentRight" id="delete${a}">${deleteAlphabetArray[a]}</div>`+"</div>";$("#deleteAlphabet").append(`<a href="#delete${a}" class="vertical"><div class="col-sm-1">${deleteAlphabetArray[a]}</div></a>`);let o=$("#deleteData").append(l);$.each(t.data,function(l){let d=t.data[l].lastName[0].toUpperCase();if(d===deleteAlphabetArray[a]){let a='<div class="row"><div class="col-sm-2"></div><div class="col-sm-2">'+`<div id="deleteSquare${l}" class="square"></div>`+'</div><div class="col-sm-6 namePosition">'+`<div id="nameLink${l}" class="nameLink" href="#">${t.data[l].lastName}`+" "+`${t.data[l].firstName}</div>`+'</div><div class="col-sm-1"><form action="">'+`<input\n                        type="checkbox"\n                        class="deleteCheckbox"\n                        id="checkList"\n                        name="checkList"\n                        value="${t.data[l].id}"\n                      />`+"</form></div></div>";o.append(a);let d=$(`#deleteSquare${l}`);l%4==0?d.css("background-color",e[0]):l%4==1?d.css("background-color",e[1]):l%4==2?d.css("background-color",e[2]):l%4==3&&d.css("background-color",e[3])}});let d=!1;$("#selectAll").on("click",function(){$(".deleteCheckbox").prop("checked",!d),d=!d,this.innerHTML=d?"Deselect":"Select",$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")}),$(".deleteCheckbox").on("click",function(){$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")})}),$("#deleteModal").modal("show")}})}),$("#deleteCancel").on("click",function(){$("#deleteModal").modal("hide")}),$("#deleteForm").submit(function(e){e.preventDefault(),$("#deleteModal").modal("hide"),$("#deleteConfirmModal").modal("show")}),$("#deleteConfirmForm").submit(function(e){e.preventDefault(),$("#deleteConfirmModal").modal("hide");let t=[];$("input:checked").each(function(){t.push($(this).val())}),$.ajax({type:"POST",url:"libs/php/deleteEmployeeCheckList.php",dataType:"text",data:{checkList:t},success:function(e){console.log(e),$("#deleteMessage").html(""),$("#deleteMessage").append(e),console.log(e),$("#deleteSuccessModal").modal("show")}}),$("#selected").html("")}),$("#deleteConfirmCancel").on("click",function(){$("#deleteConfirmModal").modal("hide")}),$("#deleteSearchBar").keyup(function(){let t=$(this).val();$.ajax({url:"libs/php/deleteSearchBar.php",method:"POST",dataType:"json",data:{query:t},success:function(a){$("#deleteData").html(""),$.each(a.data,function(l){if(""!=t){let t='<div class="row"><div class="col-sm-2"></div><div class="col-sm-2">'+`<div id="deleteSearchSquare${l}" class="square"></div>`+'</div><div class="col-sm-6 namePosition">'+`<div id="nameLink${l}" class="nameLink" href="#">${a.data[l].lastName}`+" "+`${a.data[l].firstName}</div>`+'</div><div class="col-sm-1"><form action="">'+`<input\n                        type="checkbox"\n                        class="deleteCheckbox"\n                        id="checkList"\n                        name="checkList"\n                        value="${a.data[l].id}"\n                      />`+"</form></div></div>";$("#deleteData").append(t),$("#deleteAlphabet").hide();let o=$(`#deleteSearchSquare${l}`);l%4==0?o.css("background-color",e[0]):l%4==1?o.css("background-color",e[1]):l%4==2?o.css("background-color",e[2]):l%4==3&&o.css("background-color",e[3]);let d=!1;$("#selectAll").on("click",function(){$(".deleteCheckbox").prop("checked",!d),d=!d,this.innerHTML=d?"Deselect":"Select",$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")}),$(".deleteCheckbox").on("click",function(){$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")}),$("#deleteModal").modal("show"),$("#deleteCancel").on("click",function(){$("#deleteModal").modal("hide")})}else $.ajax({type:"POST",url:"libs/php/getAllPersonnel.php",dataType:"json",success:function(t){console.log(t),$("#deleteData").html(""),deleteAlphabetArray=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$.each(deleteAlphabetArray,function(a){let l='<div class="row">'+`<div class="col-sm-1 alignmentRight" id="delete${a}">${deleteAlphabetArray[a]}</div>`+"</div>",o=$("#deleteData").append(l);$.each(t.data,function(l){let d=t.data[l].lastName[0].toUpperCase();if(d===deleteAlphabetArray[a]){let a='<div class="row"><div class="col-sm-2"></div><div class="col-sm-2">'+`<div id="deleteSquare${l}" class="square"></div>`+'</div><div class="col-sm-6 namePosition">'+`<div id="nameLink${l}" class="nameLink" href="#">${t.data[l].lastName}`+" "+`${t.data[l].firstName}</div>`+'</div><div class="col-sm-1"><form action="">'+`<input\n                                type="checkbox"\n                                class="deleteCheckbox"\n                                id="checkList"\n                                name="checkList"\n                                value="${t.data[l].id}"\n                              />`+"</form></div></div>";o.append(a);let d=$(`#deleteSquare${l}`);l%4==0?d.css("background-color",e[0]):l%4==1?d.css("background-color",e[1]):l%4==2?d.css("background-color",e[2]):l%4==3&&d.css("background-color",e[3])}});let d=!1;$("#selectAll").on("click",function(){$(".deleteCheckbox").prop("checked",!d),d=!d,this.innerHTML=d?"Deselect":"Select",$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")}),$(".deleteCheckbox").on("click",function(){$("#selected").html("");let e=$("input:checked").length;$("#selected").append(e+" selected"),e>0?$("#deleteButton").css("color","#000"):$("#deleteButton").css("color","#fff")})}),$("#deleteAlphabet").show(),$("#deleteModal").modal("show")}});$("#deleteCancel").on("click",function(){$("#deleteModal").modal("hide")}),$("#deleteForm").submit(function(e){e.preventDefault(),$("#deleteModal").modal("hide"),$("#deleteConfirmModal").modal("show")}),$("#deleteConfirmForm").submit(function(e){e.preventDefault(),$("#deleteConfirmModal").modal("hide");let t=[];$("input:checked").each(function(){t.push($(this).val())}),$.ajax({type:"POST",url:"libs/php/deleteEmployeeCheckList.php",dataType:"text",data:{checkList:t},success:function(e){$("#deleteMessage").html(""),$("#deleteMessage").append(e),$("#deleteSuccessModal").modal("show")}}),$("#selected").html("")}),$("#deleteConfirmCancel").on("click",function(){$("#deleteConfirmModal").modal("hide")})})}})}),$("#searchBar").keyup(function(){let d=$(this).val();$.ajax({url:"libs/php/searchBar.php",method:"POST",dataType:"json",data:{query:d},success:function(i){$("#directoryData").html(""),$.each(i.data,function(c){if(""!=d){let t='<div class="row"><div class="col-sm-4"></div><div class="col-sm-1">'+`<div id="searchSquare${c}" class="square"></div>`+'</div><div class="col-sm-4 namePosition">'+`<a id="nameLinkSearch${c}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${i.data[c].lastName}`+" "+`${i.data[c].firstName}</a>`;$("#directoryData").append(t);let a=$(`#searchSquare${c}`);c%4==0?a.css("background-color",e[0]):c%4==1?a.css("background-color",e[1]):c%4==2?a.css("background-color",e[2]):c%4==3&&a.css("background-color",e[3]),$("#verticalAlphabet").hide(),$(`#nameLinkSearch${c}`).on("click",function(){$("#employeeHeading").empty(),$("#employeeHeading").append($(`#nameLinkSearch${c}`).text()),$("#txtFirstName").html(i.data[c].firstName),$("#txtLastName").html(i.data[c].lastName),$("#txtJobTitle").html(i.data[c].jobTitle),$("#txtEmail").html(i.data[c].email),$("#txtDept").html(i.data[c].department),$("#txtLocation").html(i.data[c].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(i.data[c].firstName),$("#txtEditLastName").html(i.data[c].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show")}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show")}),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}})}),$("#editCancel").on("click",function(){$("#editEmployeeModal").modal("hide")}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")}),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",data:{lastName:i.data[c].lastName},success:function(e){$("#deleteButtonMessage").html(""),$("#deleteButtonMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})})}else $.ajax({type:"POST",url:"libs/php/getAll.php",dataType:"json",success:function(d){$("#directoryData").html(""),alphabetArray=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$.each(alphabetArray,function(i){t='<div class="row">'+`<div class="col-sm-5 alignmentRight" id=horizontal${i}>${alphabetArray[i]}</div>`+"</div>",a=$("#directoryData").append(t),$.each(d.data,function(t){d.data[t].lastName[0]===alphabetArray[i]&&(l='<div class="row"><div class="col-sm-5"></div><div class="col-sm-2">'+`<div id="square${t}" class="square"></div>`+'</div><div class="col-sm-4 namePosition">'+`<a id="nameLink${t}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${d.data[t].lastName}`+" "+`${d.data[t].firstName}</a>`,a.append(l),o=$(`#square${t}`),t%4==0?o.css("background-color",e[0]):t%4==1?o.css("background-color",e[1]):t%4==2?o.css("background-color",e[2]):t%4==3&&o.css("background-color",e[3]),$(`#nameLink${t}`).on("click",function(){$("#employeeHeading").empty(),$("#employeeHeading").append($(`#nameLink${t}`).text()),$("#txtFirstName").html(d.data[t].firstName),$("#txtLastName").html(d.data[t].lastName),$("#txtJobTitle").html(d.data[t].jobTitle),$("#txtEmail").html(d.data[t].email),$("#txtDept").html(d.data[t].department),$("#txtLocation").html(d.data[t].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(d.data[t].firstName),$("#txtEditLastName").html(d.data[t].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show")}),$("#editCancel").on("click",function(){$("#editModal").modal("hide")}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show"),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}}),$("#editCancel").on("click",function(){$("#editModal").modal("hide")})}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")})})})),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",data:{lastName:d.data[t].lastName},success:function(e){$("#deleteButtonConfirmMessage").html(""),$("#deleteButtonConfirmMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})}),$("#verticalAlphabet").show()})}})})}})}),$("#department").on("click",function(){departmentArray=[],$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$.each(e.data,function(t){departmentArray.push(e.data[t].name)})}}),$.ajax({url:"libs/php/getAllByDeptName.php",dataType:"json",data:{},success:function(t){$("#deptMenu").html(""),$("#deptData").html(""),$.each(departmentArray,function(a){let l='<div class="row"><div class="col-sm-1"></div>'+`<div class="col-sm-3" id="dept${a}">${departmentArray[a]}</div>`+"</div>";$("#deptMenu").append(`<a href="#dept${a}" class="vertical"><div class="col-sm-4">${departmentArray[a]}</div></a>`);let o=$("#deptData").append(l);$.each(t.data,function(l){if(t.data[l].department===departmentArray[a]){let a='<div class="row"><div class="col-sm-4"></div><div class="col-sm-2">'+`<div id="deptSquare${l}" class="square"></div>`+'</div><div class="col-sm-5 namePosition">'+`<a id="nameLinkDept${l}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${t.data[l].lastName}`+" "+`${t.data[l].firstName}</a>`;o.append(a);let d=$(`#deptSquare${l}`);l%4==0?d.css("background-color",e[0]):l%4==1?d.css("background-color",e[1]):l%4==2?d.css("background-color",e[2]):l%4==3&&d.css("background-color",e[3]),$("#deptModal").modal("show"),$("#deptCancel").on("click",function(){$("#deptModal").modal("hide")}),$(`#nameLinkDept${l}`).on("click",function(){$("#deptModal").modal("hide"),$("#employeeHeading").empty(),$("#employeeHeading").append($(`#nameLinkDept${l}`).text()),$("#txtFirstName").html(t.data[l].firstName),$("#txtLastName").html(t.data[l].lastName),$("#txtJobTitle").html(t.data[l].jobTitle),$("#txtEmail").html(t.data[l].email),$("#txtDept").html(t.data[l].department),$("#txtLocation").html(t.data[l].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(t.data[l].firstName),$("#txtEditLastName").html(t.data[l].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show")}),$("#editCancel").on("click",function(){$("#editEmployeeModal").modal("hide")}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show"),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}}),$("#editCancel").on("click",function(){$("#editModal").modal("hide")})}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")})}),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",data:{lastName:t.data[l].lastName},success:function(e){$("#deleteButtonMessage").html(""),$("#deleteButtonMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})})}})})}})}),$("#addDept").on("click",function(){$("#deptModal").modal("hide"),$("#addDeptHeading").html(""),$("#addDeptHeading").append("Add department"),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$("#addDeptModal").modal("show")}),$("#addDeptForm").submit(function(e){e.preventDefault(),$("#addDeptModal").modal("hide"),$("#addDeptConfirmModal").modal("show")}),$("#addDeptConfirmForm").submit(function(e){e.preventDefault(),$("#addDeptConfirmModal").modal("hide");let t=$("#addDeptName").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/addDepartment.php",method:"post",dataType:"text",data:{deptName:t,addDeptLoc:$("#addDeptLoc").val()},success:function(e){$("#addDeptMessage").html(""),$("#addDeptMessage").append(e)}}),$("#deptAddSuccessModal").modal("show")}),$("#addDeptCancel").on("click",function(){$("#addDeptModal").modal("hide")}),$("#addDeptConfirmCancel").on("click",function(){$("#addDeptConfirmModal").modal("hide")}),$("#deleteDept").on("click",function(){$("#deptAddSuccessModal").modal("hide"),$("#deptModal").modal("hide"),$("#deleteDeptHeading").html(""),$("#deleteDeptHeading").append("Delete department"),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#deleteDeptModal").modal("show")}),$("#deleteDeptForm").submit(function(e){e.preventDefault(),$("#deleteDeptModal").modal("hide"),$("#deleteDeptConfirmModal").modal("show")}),$("#deleteDeptConfirmForm").submit(function(e){e.preventDefault(),$("#deleteDeptConfirmModal").modal("hide"),$.ajax({url:"libs/php/deleteDepartmentByID.php",method:"post",dataType:"text",data:{deleteDept:$("#deleteSelectDept").val()},success:function(e){$("#deleteDeptMessage").html(""),$("#deleteDeptMessage").append(e)}}),$("#deptDeleteSuccessModal").modal("show")}),$("#deleteDeptCancel").on("click",function(){$("#deleteDeptModal").modal("hide")}),$("#deleteDeptConfirmCancel").on("click",function(){$("#deleteDeptConfirmModal").modal("hide")}),$("#deptDeleteSuccessModal").modal("hide"),$("#location").on("click",function(){let t=[];$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$.each(e.data,function(a){t.push(e.data[a].name)})}}),$.ajax({url:"libs/php/getAllByLocName.php",dataType:"json",data:{},success:function(a){$("#locationMenu").html(""),$("#locationData").html(""),$.each(t,function(l){let o='<div class="row"><div class="col-sm-1"></div>'+`<div class="col-sm-3" id="location${l}">${t[l]}</div>`+"</div>";$("#locationMenu").append(`<a href="#location${l}" class="vertical"><div class="col-sm-4">${t[l]}</div></a>`);let d=$("#locationData").append(o);$.each(a.data,function(o){if(a.data[o].location===t[l]){let t='<div class="row"><div class="col-sm-4"></div><div class="col-sm-2">'+`<div id="locSquare${o}" class="square"></div>`+'</div><div class="col-sm-5 namePosition">'+`<a id="nameLinkLoc${o}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${a.data[o].lastName}`+" "+`${a.data[o].firstName}</a>`;d.append(t),locSquare=$(`#locSquare${o}`),o%4==0?locSquare.css("background-color",e[0]):o%4==1?locSquare.css("background-color",e[1]):o%4==2?locSquare.css("background-color",e[2]):o%4==3&&locSquare.css("background-color",e[3]),$("#locationModal").modal("show"),$("#locCancel").on("click",function(){$("#locationModal").modal("hide")}),$(`#nameLinkLoc${o}`).on("click",function(){$("#locationModal").modal("hide"),$("#employeeHeading").empty(),$("#employeeHeading").append($(`#nameLinkLoc${o}`).text()),$("#txtFirstName").html(a.data[o].firstName),$("#txtLastName").html(a.data[o].lastName),$("#txtJobTitle").html(a.data[o].jobTitle),$("#txtEmail").html(a.data[o].email),$("#txtDept").html(a.data[o].department),$("#txtLocation").html(a.data[o].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(a.data[o].firstName),$("#txtEditLastName").html(a.data[o].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show")}),$("#editCancel").on("click",function(){$("#editEmployeeModal").modal("hide")}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show"),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}}),$("#editCancel").on("click",function(){$("#editModal").modal("hide")})}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")})}),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",
data:{lastName:a.data[o].lastName},success:function(e){$("#deleteButtonMessage").html(""),$("#deleteButtonMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})})}})})}})}),$("#addLoc").on("click",function(){$("#locationModal").modal("hide"),$("#addLocHeading").html(""),$("#addLocHeading").append("Add location"),$("#addLocModal").modal("show")}),$("#addLocForm").submit(function(e){e.preventDefault(),$("#addLocModal").modal("hide"),$("#addLocConfirmModal").modal("show")}),$("#addLocConfirmForm").submit(function(e){e.preventDefault(),$("#addLocConfirmModal").modal("hide");let t=$("#addLocName").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/addLocation.php",method:"post",dataType:"text",data:{locName:t},success:function(e){$("#addLocMessage").html(""),$("#addLocMessage").append(e)}}),$("#locAddSuccessModal").modal("show")}),$("#addLocCancel").on("click",function(){$("#addLocModal").modal("hide")}),$("#addLocConfirmCancel").on("click",function(){$("#addLocConfirmModal").modal("hide")}),$("#deleteLoc").on("click",function(){$("#locAddSuccessModal").modal("hide"),$("#locationModal").modal("hide"),$("#deleteLocHeading").html(""),$("#deleteLocHeading").append("Delete location"),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$("#deleteLocModal").modal("show")}),$("#deleteLocForm").submit(function(e){e.preventDefault(),$("#deleteLocModal").modal("hide"),$("#deleteLocConfirmModal").modal("show")}),$("#deleteLocConfirmForm").submit(function(e){e.preventDefault(),$("#deleteLocConfirmModal").modal("hide"),$.ajax({url:"libs/php/deleteLocationByID.php",method:"post",dataType:"text",data:{deleteLoc:$("#deleteSelectLoc").val()},success:function(e){$("#deleteLocMessage").html(""),$("#deleteLocMessage").append(e)}}),$("#locDeleteSuccessModal").modal("show")}),$("#deleteLocCancel").on("click",function(){$("#deleteLocModal").modal("hide")}),$("#deleteLocConfirmCancel").on("click",function(){$("#deleteLocConfirmModal").modal("hide")}),$("#locDeleteSuccessModal").modal("hide"),$("#search").on("click",function(){$(this).closest("form").find("input[type=text]").val(""),$("#searchHeading").empty(),$("#searchHeading").append("Search"),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#searchModal").modal("show")}),$("#searchCancel").on("click",function(){$("#searchModal").modal("hide")}),$("#searchForm").submit(function(e){e.preventDefault(),$("#searchModal").modal("hide"),$("#searchConfirmModal").modal("show")}),$("#searchConfirmCancel").on("click",function(){$("#searchConfirmModal").modal("hide")}),$("#searchConfirmForm").submit(function(t){t.preventDefault(),$("#searchConfirmModal").modal("hide");let a=$("#searchFirstName").val();""!==a&&(a=a[0].toUpperCase()+a.substring(1,a.length));let l=$("#searchLastName").val();""!==l&&(l=l[0].toUpperCase()+l.substring(1,l.length)),$.ajax({type:"POST",url:"libs/php/searchButton.php",dataType:"json",data:{firstName:a,lastName:l,email:$("#searchEmail").val(),department:$("#searchDept").val(),location:$("#searchLoc").val()},success:function(t){if(console.log(t),$("#searchModal").modal("hide"),$("#searchResultsData").html(""),$("#searchResultsHeading").html(""),t.data.length>0){let a;$("#searchResultsHeading").append("Search results"),$.each(t.data,function(l){a='<div class="row"><div class="col-sm-3"></div><div class="col-sm-2">'+`<div id="searchSquare${l}" class="square"></div>`+'</div><div class="col-sm-4 namePosition">'+`<a id="searchNameLink${l}" class="nameLink" href="#employeeHeading" data-bs-toggle="modal" data-bs-target="#employeeModal">${t.data[l].lastName}`+" "+`${t.data[l].firstName}</a>`,$("#searchResultsData").append(a),o=$(`#searchSquare${l}`),l%4==0?o.css("background-color",e[0]):l%4==1?o.css("background-color",e[1]):l%4==2?o.css("background-color",e[2]):l%4==3&&o.css("background-color",e[3]),$("#searchResultsModal").modal("show"),$(`#searchNameLink${l}`).on("click",function(){$("#searchResultsModal").modal("hide"),$("#employeeHeading").empty(),$("#employeeHeading").append($(`#searchNameLink${l}`).text()),$("#txtFirstName").html(t.data[l].firstName),$("#txtLastName").html(t.data[l].lastName),$("#txtJobTitle").html(t.data[l].jobTitle),$("#txtEmail").html(t.data[l].email),$("#txtDept").html(t.data[l].department),$("#txtLocation").html(t.data[l].location),$("#employeeModal").modal("show"),$("#edit").on("click",function(){$("#employeeModal").modal("hide"),$("#editHeading").empty(),$("#editHeading").append("Edit employee"),$("#txtEditFirstName").html(t.data[0].firstName),$("#txtEditLastName").html(t.data[0].lastName),$.ajax({type:"POST",url:"libs/php/getAllDepartments.php",dataType:"json",success:function(e){$(".deptSelectList").html(""),$.each(e.data,function(t){$(".deptSelectList").append($("<option>",{value:e.data[t].locationID,text:e.data[t].name}))})}}),$.ajax({type:"POST",url:"libs/php/getAllLocations.php",dataType:"json",success:function(e){$(".locSelectList").html(""),$.each(e.data,function(t){$(".locSelectList").append($("<option>",{value:e.data[t].id,text:e.data[t].name}))})}}),$(".deptSelectList").change(function(){$(".locSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$(".locSelectList").change(function(){$(".deptSelectList option[value="+$(this).val()+"]").prop("selected","selected")}),$("#editEmployeeModal").modal("show")}),$("#editCancel").on("click",function(){$("#editEmployeeModal").modal("hide")}),$("#editForm").submit(function(e){e.preventDefault(),$("#editEmployeeModal").modal("hide"),$("#editConfirmModal").modal("show"),$("#editConfirmForm").submit(function(e){e.preventDefault(),$("#editConfirmModal").modal("hide");let t=$("#editJobTitle").val();""!==t&&(t=t[0].toUpperCase()+t.substring(1,t.length)),$.ajax({url:"libs/php/editEmployee.php",method:"post",dataType:"text",data:{firstName:$("#txtEditFirstName").html(),lastName:$("#txtEditLastName").html(),jobTitle:t,email:$("#editEmail").val(),dept:$("#editDept").val()},success:function(e){$("#editMessage").html(""),$("#editMessage").append(e),$("#editSuccessModal").modal("show")}})}),$("#editConfirmCancel").on("click",function(){$("#editConfirmModal").modal("hide")})})}),$("#delete").on("click",function(){$("#employeeModal").modal("hide"),$("#deleteButtonConfirmModal").modal("show")}),$("#deleteButtonConfirmForm").submit(function(e){e.preventDefault(),$("#deleteButtonConfirmModal").modal("hide"),$.ajax({type:"POST",url:"libs/php/deleteEmployee.php",dataType:"text",data:{lastName:t.data[l].lastName},success:function(e){$("#deleteButtonMessage").html(""),$("#deleteButtonMessage").append(e),$("#deleteButtonSuccessModal").modal("show")}})}),$("#deleteButtonConfirmCancel").on("click",function(){$("#deleteButtonConfirmModal").modal("hide")})})}else $("#searchResultsHeading").append("No matches"),$("#searchResultsModal").modal("show")}})})});