$(window).on("load",function(){$("#preloader").length&&$("#preloader").delay(100).fadeOut("slow",function(){$(this).remove()})}),$(document).ready(function(){$.ajax({type:"POST",url:"libs/php/names.php",dataType:"json",success:function(t){$("#selectCountry").html(""),$.each(t.data,function(a){$("#selectCountry").append($("<option>",{value:t.data[a].code,text:t.data[a].name}))})}});let t=L.map("map");L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){userLat=t.coords.latitude,userLng=t.coords.longitude,$.ajax({url:"libs/php/openCage.php",type:"POST",dataType:"json",data:{q:String(userLat)+","+String(userLng)},success:function(t){"ok"==t.status.name&&$("#selectCountry").val(t.data.results[0].components.country_code.toUpperCase()).trigger("change")}})}),$("#selectCountry").change(function(){$.ajax({type:"POST",url:"libs/php/borders.php",dataType:"json",success:function(a){$.each(a.data,function(e){if($("#selectCountry").val()===a.data[e].code){let o={color:"#ff9966",weight:3,opacity:.9,fillOpacity:.5},n=L.geoJSON(a.data[e].border,{style:o}).addTo(t);t.fitBounds(n.getBounds())}})}}),$.ajax({url:"libs/php/countryInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&($("#countryDataHeading").empty(),$("#countryDataHeading").append($("#selectCountry option:selected").text()+" Data"),$("#txtCapital").html(t.data[0].capital),$("#txtContinent").html(t.data[0].continent),$("#txtContinentName").html(t.data[0].continentName),$("#txtCountryName").html(t.data[0].countryName),$("#txtCurrencyCode").html(t.data[0].currencyCode),$("#txtLanguages").html(t.data[0].languages),$("#txtNorth").html(t.data[0].north),$("#txtEast").html(t.data[0].east),$("#txtSouth").html(t.data[0].south),$("#txtWest").html(t.data[0].west),$("#txtPopulation").html(t.data[0].population))}}),$.ajax({url:"libs/php/incomeInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){if("ok"==t.status.name){$("#countryIncomeHeading").empty(),$("#countryIncomeHeading").append($("#selectCountry option:selected").text()+" Income");let a=t.data[1][0].incomeLevel.value;$("#txtIncome").html(a)}}}),$.ajax({url:"libs/php/countryFlag.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&($("#countryFlagHeading").empty(),$("#countryFlagHeading").append($("#selectCountry option:selected").text()+" Flag"),$("#txtFlag").html(`<img class="flag" src=${t.data.flag} />`))}}),$.ajax({url:"libs/php/countryInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&$.ajax({url:"libs/php/rateInfo.php",type:"POST",dataType:"json",data:{currencyCode:t.data[0].currencyCode},success:function(t){"ok"==t.status.name&&($("#countryRateHeading").empty(),$("#countryRateHeading").append($("#selectCountry option:selected").text()+" Exchange Rates"),$("#txtUSD").html(t.data.conversion_rates.USD),$("#txtEUR").html(t.data.conversion_rates.EUR),$("#txtYEN").html(t.data.conversion_rates.JPY),$("#txtGBP").html(t.data.conversion_rates.GBP),$("#txtAUD").html(t.data.conversion_rates.AUD),$("#txtCAD").html(t.data.conversion_rates.CAD),$("#txtCHF").html(t.data.conversion_rates.CHF),$("#txtCNY").html(t.data.conversion_rates.CNY),$("#txtSEK").html(t.data.conversion_rates.SEK),$("#txtNZD").html(t.data.conversion_rates.NZD))}})}}),$.ajax({url:"libs/php/holidayInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&($("#countryHolidayHeading").empty(),$("#countryHolidayHeading").append("First 10 Holidays of "+$("#selectCountry option:selected").text()),$("#date0").html(t.data.response.holidays[0].date.iso.slice(0,10)),$("#name0").html(t.data.response.holidays[0].name),$("#date1").html(t.data.response.holidays[1].date.iso.slice(0,10)),$("#name1").html(t.data.response.holidays[1].name),$("#date2").html(t.data.response.holidays[2].date.iso.slice(0,10)),$("#name2").html(t.data.response.holidays[2].name),$("#date3").html(t.data.response.holidays[3].date.iso.slice(0,10)),$("#name3").html(t.data.response.holidays[3].name),$("#date4").html(t.data.response.holidays[4].date.iso.slice(0,10)),$("#name4").html(t.data.response.holidays[4].name),$("#date5").html(t.data.response.holidays[5].date.iso.slice(0,10)),$("#name5").html(t.data.response.holidays[5].name),$("#date6").html(t.data.response.holidays[6].date.iso.slice(0,10)),$("#name6").html(t.data.response.holidays[6].name),$("#date7").html(t.data.response.holidays[7].date.iso.slice(0,10)),$("#name7").html(t.data.response.holidays[7].name),$("#date8").html(t.data.response.holidays[8].date.iso.slice(0,10)),$("#name8").html(t.data.response.holidays[8].name),$("#date9").html(t.data.response.holidays[9].date.iso.slice(0,10)),$("#name9").html(t.data.response.holidays[9].name))}}),$.ajax({url:"libs/php/countryInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&$.ajax({url:"libs/php/weatherInfo.php",type:"POST",dataType:"json",data:{q:t.data[0].capital},success:function(t){if("ok"==t.status.name){$("#countryWeatherHeading").empty(),$("#countryWeatherHeading").append($("#selectCountry option:selected").text()+" Capital Weather");let a=t.data.weather[0].description,e=a[0].toUpperCase(),o=a.substring(1,a.length-1);$("#txtDescription").html(e+o),$("#txtFeelsLike").html(t.data.main.feels_like),$("#txtHumidity").html(t.data.main.humidity),$("#txtPressure").html(t.data.main.pressure),$("#txtTemp").html(t.data.main.temp),$("#txtTempMax").html(t.data.main.temp_max),$("#txtTempMin").html(t.data.main.temp_min),$("#txtWindDeg").html(t.data.wind.deg),$("#txtWindSpeed").html(t.data.wind.speed)}}})}}),$.ajax({url:"libs/php/coronaInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(t){"ok"==t.status.name&&($("#countryCoronaHeading").empty(),$("#countryCoronaHeading").append($("#selectCountry option:selected").text()+" Coronavirus Data"),$("#txtUpdatedOn").html(t.data.data.updated_at.slice(0,10)),$("#txtDeathsToday").html(t.data.data.today.deaths),$("#txtConfirmedToday").html(t.data.data.today.confirmed),$("#txtDeaths").html(t.data.data.latest_data.deaths),$("#txtConfirmedDeaths").html(t.data.data.latest_data.confirmed),$("#txtRecovered").html(t.data.data.latest_data.recovered),$("#txtCritical").html(t.data.data.latest_data.critical),$("#txtDeathRate").html(t.data.data.latest_data.calculated.death_rate.toString().slice(0,4)),$("#txtRecovRate").html(t.data.data.latest_data.calculated.recovery_rate.toString().slice(0,5)),$("#txtPerMil").html(t.data.data.latest_data.calculated.cases_per_million_population))}}),$.ajax({url:"libs/php/cityInfo.php",type:"POST",dataType:"json",data:{countryCode:$("#selectCountry").val()},success:function(a){let e=L.ExtraMarkers.icon({icon:"fa-map-marker",iconColor:"#00b386",markerColor:"#00b386",svg:!0,shape:"circle",prefix:"fa"});$.each(a.cities,function(o){let n=L.markerClusterGroup();n.addLayer(L.marker(new L.LatLng(a.cities[o].latitude,a.cities[o].longitude),{icon:e})),t.addLayer(n)})}})}),L.easyButton("fa-landmark",function(t,a){$("#countryInfoModal").modal("show")}).addTo(t),L.easyButton("fa-coins",function(t,a){$("#countryIncomeModal").modal("show")}).addTo(t),L.easyButton("fa-flag",function(t,a){$("#countryFlagModal").modal("show")}).addTo(t),L.easyButton("fa-dice-d20",function(t,a){$("#countryRateModal").modal("show")}).addTo(t),L.easyButton("fa-candy-cane",function(t,a){$("#countryHolidayModal").modal("show")}).addTo(t),L.easyButton("fa-cloud-moon-rain",function(t,a){$("#countryWeatherModal").modal("show")}).addTo(t),L.easyButton("fa-head-side-mask",function(t,a){$("#countryCoronaModal").modal("show")}).addTo(t)});